# Лабораторная работа #2

## Условие задачи

Создать таблицу, содержащую не менее 40-ка записей с вариантной частью. Упорядочить данные в ней по возрастанию ключей, где ключ – любое невариантное поле (по выбору программиста), используя: а) саму таблицу, б) массив ключей.

## Описание ТЗ

В таблице содержится информация о студентах. Основная часть: тип жилья (дом, общежитие), имя, пол, возраст, средний балл за сессию, дата поступления. Вариантная часть делится на две подгруппы:

1. Дом: название улицы, номер дома, номер квартиры.
2. Общежитие: номер общежития, номер комнаты.

Ввести общий список студентов группы. Вывести список студентов, живущих в общежитии указанного года поступления. Реализовать возможность добавления записей в конец таблицы и удаления записи по значению указанного поля.

### Исходные данные

Текстовый файл, содержащий элементы тыблицы.

### Результаты

Резульаты выводятся на экран: (отсортированная по среднему баллу за сессию) таблица студентов; список студентов живущих в общежитии указанного года поступления; (отсортированная) таблица ключей; эффективность алгоритмов при различной реализации программы.

### Способ обращения к программе

Обращение к программе происходит через исполняемый файл. Исходные данные берутся из файла, вывод результатов производится в окно терминала.

### Аварийные ситуации и ошибки пользователя

* Открытие несуществующего файла.
* Некорректные данные в файле.
* Некорректный ввод.
* Пустой ввод.
* Обработка пустой таблицы.

Во всех перечисленных случаях программа выдаёт сообщение об ошибке.

## Описание СД

Строки таблицы студентов храянятся в структуре data_table. Строки таблицы ключей хранятся в структуре key_table. Данные, находящиеся в строках хранятся в структуре data с вариативной частью и в структуре key, соответсвенно.

```
// Ячейки таблицы студентов
struct data{    char type[10];     // Тип жилья    char name[SZ];     // Имя    char gender[5];    // Пол    int age;           // Возраст    float mark;        // Средний балл за сессию    int year;          // Дата поступления    union    {        struct        {            char address[SZ];     // Улица            int num_house;        // Номер дома            int num_flat;         // Номер квартиры        } house;        struct        {            int num_hostel;       // Номер общежития            int num_room;         // Номер комнаты        } hostel;    } condition;};

// Ячейки таблицы ключей
struct key{    int id;            // Номер студента в таблице    float value;       // Средний балл за сессию};// Строки таблицы студентовstruct data_table{    struct data *p;    // Строки таблицы    int sz;            // Количество выделенных строк    int n;             // Количество действительных строк};// Строки таблицы ключейstruct key_table{    struct key *p;     // Строки таблицы    int n;             // Количество действительных строк};
```

## Описание алгоритма

При запуске программы и после каждого завершённого действия пользователя на экран выводится меню, через которое производится управление операциями над таблицами.

## Сравнительный анализ

Если есть необходимость хранения различных вариативных данных при различных данных, находящихся в основной части, то для того, чтобы не создавать отдельную запись, а хранить всё в одном блоке, целесообразно использовать запись с вариантной частью.

Для реализации поставленной задачи были выбраны сортиировка вставками и сортировка пузырьком. Для таблиц различной размерности, время каждой сортировки следующее.

Сортировка пузырьком.
|Размерность таблицы|Время|
|-|-|
|1|2699|
|20|10800|
|48|40502|

Сортировка вставками.
|Размерность таблицы|Время|
|-|-|
|1|2700|
|20|8099|
|48|10801|

Для таблиц различной размерности, время каждой сортировки следующее.

С таблицей ключей
|Размерность таблицы|Время|
|-|-|
|1|2700|
|20|8100|
|48|21600|

Без таблицы ключей
|Размерность таблицы|Время|
|-|-|
|1|2700|
|20|10800|
|48|40502|

Таблицы ключей используются для ускорения процесса сортировки элементов исходной таблицы. Наиболее эффективным данный метод становится при увеличении исходной таблицы. 

## Выводы

В ходе данной лабораторной работы были приобретены навыки работы с типом данных структура, содержащим вариантную часть, и с данными, хранящимися в таблицах.

## Вопросы

**1. Как выделяется память под вариантную часть записи?**

Объем памяти, необходимый для записи с вариантами складывается из длин полей фиксированной части и максимального по длине поля вариантной части.

**2. Что будет, если в вариантную часть ввести данные, несоответствующие описанным?**

Тип данных в вариантной части при компиляции не проверяется, никакая ошибка выведена не будет.

**3. Кто должен следить за правильностью выполнения операций с вариантной частью записи?**

Контроль за правильностью операций с вариантной частью должен производить программист.

**4. Что представляет собой таблица ключей, зачем она нужна?**

Таблица ключей - это таблица, доступ к элементу которой осуществляется по его индексу, содержит в себе сам индекс и ключ. Такие таблицы нужны для ускорения процесса поиска и сортировки элементов исходной таблицы.

**5. В каких случаях эффективнее обрабатывать данные в самой таблице, а когда – использовать таблицу ключей?**

Таблицу ключей эффективнее использовать при большом размере памяти каждой записи или при больших размерах исходной таблицы.

**6. Какие способы сортировки предпочтительнее для обработки таблиц и почему?**

Для обработки таблиц предпочтительнее использовать сортировку с помощью таблицы ключей.